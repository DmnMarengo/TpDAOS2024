<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Crear Comercio</title>
</head>
<body>
    <h2>Crear Nuevo Comercio</h2>

    <form id="comercioForm">
        <input type="text" id="cuit" name="cuit" placeholder="CUIT">
        <br>
        <input type="text" id="razonSocial" name="razonSocial" placeholder="Razón Social">
        <br>
        <input type="text" id="direccion" name="direccion" placeholder="Dirección">
        <br>
        <button type="button" onclick="crearComercio()">Crear Comercio</button>
    </form>

    <script>
        function crearComercio() {
            var comercio = {
                cuit: document.getElementById("cuit").value,
                razonSocial: document.getElementById("razonSocial").value,
                direccion: document.getElementById("direccion").value
            };

            fetch('http://localhost:8080/api/comercios', { 
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(comercio),
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Error al crear el comercio: ' + response.status);
                }
                return response.json();
            })
            .then(data => {
                alert('Comercio creado exitosamente');
                window.location.href = '/listarComercios.html'; 
            })
            .catch(error => {
                console.error('Error al crear el comercio:', error);
                alert('Error al crear el comercio: ' + error.message);
            });
        }
    </script>
</body>
</html>